<template>
    <div>
        <van-nav-bar :title="title" fixed />
        <div class="container">
            <div class="stockTitle">
                <div>
                    股票 {{ $store.state.stockName }}
                </div>
            </div>
            <div style="width:18rem;height:9rem;background:#fff" id="chart"></div>
            <div class="buyAsale">
                <van-button plain type="danger" @click="buyStock">买入股票</van-button>
                <van-button plain type="primary" @click="saleStock">抛售股票</van-button>
                <van-dialog v-model="show" title="购买股票" show-cancel-button @confirm="closedDialog" @cancel="cancels">
                    <div style="margin: 0.7rem; text-align: center;height: 7rem;line-height: 2.2rem;">
                        <span style="font-size: 0.8rem; font-weight: 600;">当前每股价格为 <span
                                style="color: red;">143￥</span></span>
                        <van-stepper v-model="stockMin" min="1" max="10" @change="plusAred" />
                        <span>您累计投入: <span style="color: red;">{{stockBuyed}}</span> 元</span>
                    </div>
                </van-dialog>
                <van-dialog v-model="show02" title="抛售股票" show-cancel-button>
                    <div style="margin: 0.7rem; text-align: center;height: 7rem;line-height: 2.2rem;">
                        <span style="font-size: 0.8rem; font-weight: 600;">当前持有为<span
                                style="color: red;">0</span>股</span>
                        <van-stepper v-model="stockMin" min="1" max="10" disabled />
                        <span>您累计卖出: <span style="color: red;">{{stockSales}}</span> 元</span>
                    </div>
                </van-dialog>
            </div>
            <div class="nowDays">
                <div class="nowDays_title">今日资金流动方向</div>
                <div style="width:18rem;height:8rem;background:#fff" id="chart2"></div>
                <ul>
                    <li v-for="(item, index) in items01" :key="index">
                        <span>{{item.name}}</span>
                        <span>总资金(万元)</span>
                        <span>{{item.desc}}</span>
                    </li>
                </ul>
            </div>
            <div class="bigCash">
                <div class="nowDays_title02">大资金动向</div>
                <div class="bigCash_con">
                    <div class="nono">
                        <ul>
                            <li v-for="(item, index) in items02" :key="index">{{item}}</li>

                        </ul>
                        <div class="picNo"></div>
                        <div class="fontNo">
                            <span>当前没有分笔记录</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    import Vue from 'vue';
    import { Dialog, Toast } from 'vant';
    Vue.use(Toast)
    export default {
        data() {
            return {
                title: '个股详情-交易',
                items01: [
                    { name: "主力流入", desc: "33744" },
                    { name: "主力流出", desc: "20870" },
                    { name: "净流入数", desc: "12874" },
                ],
                items02: ['时间', '金额', '手数', '均价'],
                show: false,
                show02: false,
                stockMin: 1,
                stockBuyed: 147,
                stockSales: 0
            }
        },
        methods: {
            buyStock() {
                this.show = true
            },
            saleStock() {
                this.show02 = true
            },
            plusAred() {
                this.stockBuyed = parseInt(this.stockMin) * 147
            },
            closedDialog() {
                Dialog.confirm({
                    message: '您当前尚未开户，是否申请开户？'
                }).then(() => {
                    setTimeout(() => {
                        this.$router.push('/public/stockRegister?name=股票开户')
                    }, 500);
                }).catch(() => {
                    setTimeout(() => {
                        Toast.fail('购买失败');
                    }, 500);
                });
            },
            cancels(){
                this.show = false
            }
        },
        mounted() {

            var option;
            const gradient = (a, b) => ({
                type: "linear",
                x: 0,
                y: 0,
                x2: 1,
                y2: 1,
                colorStops: [
                    {
                        offset: 0,
                        color: a // 0% 处的颜色
                    },
                    {
                        offset: 1,
                        color: b // 100% 处的颜色
                    }
                ]
            })
            option = {
                axis: [
                    {
                        position: "left",
                        $dataIndex: 0,
                        dataKey: 0,
                        barGap: 0,
                        paddingInner: "44%",
                        paddingOuter: "40%",
                        tick: {
                            show: false
                        },
                        line: {
                            show: false
                        },
                        label: {
                            show: true,
                            padding: 10,
                            style: {
                                fill: "#312F32",
                                fontSize: 14
                            }
                        },
                        splitLine: {
                            show: false
                        },
                        splitArea: {
                            show: false
                        },
                        name: {
                            show: false
                        }
                    },
                    {
                        position: "bottom",
                        type: "linear",
                        xOrY: "y",
                        tick: {
                            show: false
                        },
                        line: {
                            show: false
                        },
                        label: {
                            show: false
                        },
                        splitLine: {
                            show: false
                        },
                        splitArea: {
                            show: false
                        },
                        name: {
                            show: false
                        }
                    }
                ],
                grid: [
                    {
                        top: "18%",
                        left: "16%",
                        right: "11%",
                        bottom: "20%"
                    }
                ],
                series: [
                    {
                        type: "bar",
                        $dataIndex: 0,
                        dataKey: 1,
                        rectRadius: 100,
                        name: "占比",
                        itemStyle: {
                            normal: {
                                fill: gradient("#FF8A52", "#FF6153")
                            }
                        },
                        label: {
                            show: "all",
                            formatter: data => (data / 100).toFixed(2) + "%",
                            style: {
                                position: "right",
                                fill: data => (data >= 0 ? "#FF6153" : "green"),
                                fontSize: 14
                            }
                        }
                    }
                ],
                data: [
                    {
                        originData: [
                            ["净流入", 370, 420],
                            ["大单", 315, 455],
                            ["小单", 420, 160]
                        ]
                    }
                ],
                tooltip: [
                    {
                        "trigger": "axis",
                        "$axisIndex": 0,
                        style: {
                            backgroundColor: "rgba(57,93,129,0.6)"
                        }
                    }
                ]
            }
            var myChart = D3Charts.init("chart2");
            myChart.setOption(option);

            /****************************/
            var option;
            document.getElementById('chart').style.width = '18rem';
            document.getElementById('chart').style.height = '9rem';
            var chart = D3Charts.init('chart');
            var code = 'hs_300033'
            var color = {
                axisLine: '#ccc',
                abAxis: '#de422e',
                beAxis: '#3e9663',
                eqAxis: '#444',
                // 悬停十字线
                hoverLine: '#A0A0A0'
            }
            var kData = [{
                "s": "be",
                "t": "20190509 0930",
                "nowp": 79.37,
                "np": 6105457,
                "av": 79.37,
                "n": 76924,
                "nowpPct": -0.007626906726681663,
                "avPct": -0.007626906726681663
            }, {
                "s": "ab",
                "t": "20190509 0931",
                "nowp": 79.75,
                "np": 25385938,
                "av": 79.471,
                "n": 319337,
                "nowpPct": -0.0028757189297324826,
                "avPct": -0.006364091022755693
            }, {
                "s": "ab",
                "t": "20190509 0932",
                "nowp": 80.23,
                "np": 7233842,
                "av": 79.541,
                "n": 90597,
                "nowpPct": 0.00312578144536134,
                "avPct": -0.005488872218054603
            }, {
                "s": "ab",
                "t": "20190509 0933",
                "nowp": 80.8,
                "np": 9421517,
                "av": 79.762,
                "n": 116775,
                "nowpPct": 0.01025256314078511,
                "avPct": -0.002725681420355133
            }, {
                "s": "ab",
                "t": "20190509 0934",
                "nowp": 81.5,
                "np": 11798634,
                "av": 80,
                "n": 145684,
                "nowpPct": 0.0190047511877969,
                "avPct": 0.0002500625156288575
            }, {
                "s": "be",
                "t": "20190509 0935",
                "nowp": 81.08,
                "np": 12556519,
                "av": 80.218,
                "n": 154500,
                "nowpPct": 0.013753438359589826,
                "avPct": 0.0029757439359839903
            }, {
                "s": "ab",
                "t": "20190509 0936",
                "nowp": 81.39,
                "np": 9045608,
                "av": 80.325,
                "n": 111400,
                "nowpPct": 0.017629407351837916,
                "avPct": 0.004313578394598635
            }, {
                "s": "be",
                "t": "20190509 0937",
                "nowp": 81,
                "np": 13669139,
                "av": 80.459,
                "n": 168200,
                "nowpPct": 0.012753188297074218,
                "avPct": 0.0059889972493123176
            }, {
                "s": "ab",
                "t": "20190509 0938",
                "nowp": 81.41,
                "np": 8066624,
                "av": 80.502,
                "n": 99579,
                "nowpPct": 0.017879469867466774,
                "avPct": 0.00652663165791437
            }, {
                "s": "ab",
                "t": "20190509 0939",
                "nowp": 81.67,
                "np": 15082795,
                "av": 80.642,
                "n": 184800,
                "nowpPct": 0.02113028257064263,
                "avPct": 0.008277069267316728
            }, {
                "s": "be",
                "t": "20190509 0940",
                "nowp": 81.2,
                "np": 12440765,
                "av": 80.725,
                "n": 152600,
                "nowpPct": 0.015253813453363326,
                "avPct": 0.009314828707176672
            }, {
                "s": "ab",
                "t": "20190509 0941",
                "nowp": 81.48,
                "np": 5659331,
                "av": 80.754,
                "n": 69500,
                "nowpPct": 0.018754688672168042,
                "avPct": 0.00967741935483872
            }, {
                "s": "be",
                "t": "20190509 0942",
                "nowp": 81.31,
                "np": 5423980,
                "av": 80.78,
                "n": 66600,
                "nowpPct": 0.016629157289322308,
                "avPct": 0.010002500625156252
            }, {
                "s": "ab",
                "t": "20190509 0943",
                "nowp": 81.39,
                "np": 10691300,
                "av": 80.808,
                "n": 131700,
                "nowpPct": 0.017629407351837916,
                "avPct": 0.010352588147036795
            }, {
                "s": "be",
                "t": "20190509 0944",
                "nowp": 80.6,
                "np": 6570700,
                "av": 80.821,
                "n": 81000,
                "nowpPct": 0.0077519379844960025,
                "avPct": 0.010515128782195474
            }, {
                "s": "ab",
                "t": "20190509 0945",
                "nowp": 81.23,
                "np": 6468030,
                "av": 80.822,
                "n": 80000,
                "nowpPct": 0.0156289072268067,
                "avPct": 0.010527631907976977
            }, {
                "s": "be",
                "t": "20190509 0946",
                "nowp": 80.51,
                "np": 7190650,
                "av": 80.825,
                "n": 88900,
                "nowpPct": 0.006626656664166055,
                "avPct": 0.010565141285321315
            }, {
                "s": "ab",
                "t": "20190509 0947",
                "nowp": 80.56,
                "np": 5826980,
                "av": 80.817,
                "n": 72304,
                "nowpPct": 0.007251812953238288,
                "avPct": 0.01046511627906963
            }, {
                "s": "be",
                "t": "20190509 0948",
                "nowp": 80,
                "np": 9270920,
                "av": 80.783,
                "n": 115696,
                "nowpPct": 0.0002500625156288575,
                "avPct": 0.01004001000250059
            }, {
                "s": "ab",
                "t": "20190509 0949",
                "nowp": 80.46,
                "np": 8957000,
                "av": 80.748,
                "n": 111928,
                "nowpPct": 0.006001500375093645,
                "avPct": 0.009602400600150045
            }, {
                "s": "be",
                "t": "20190509 0950",
                "nowp": 79.76,
                "np": 7285820,
                "av": 80.72,
                "n": 91100,
                "nowpPct": -0.002750687671917965,
                "avPct": 0.009252313078269504
            }, {
                "s": "ab",
                "t": "20190509 0951",
                "nowp": 79.8,
                "np": 8202100,
                "av": 80.681,
                "n": 102904,
                "nowpPct": -0.0022505626406602503,
                "avPct": 0.008764691172793115
            }, {
                "s": "ab",
                "t": "20190509 0952",
                "nowp": 80.16,
                "np": 7765170,
                "av": 80.655,
                "n": 97100,
                "nowpPct": 0.0022505626406600725,
                "avPct": 0.008439609902475583
            }, {
                "s": "be",
                "t": "20190509 0953",
                "nowp": 79.83,
                "np": 9058490,
                "av": 80.627,
                "n": 113300,
                "nowpPct": -0.0018754688672168753,
                "avPct": 0.00808952238059504
            }, {
                "s": "ab",
                "t": "20190509 0954",
                "nowp": 80.28,
                "np": 5321040,
                "av": 80.616,
                "n": 66400,
                "nowpPct": 0.0037509377344335727,
                "avPct": 0.007951987996999196
            }, {
                "s": "be",
                "t": "20190509 0955",
                "nowp": 79.95,
                "np": 5477300,
                "av": 80.604,
                "n": 68400,
                "nowpPct": -0.00037509377344337506,
                "avPct": 0.007801950487621845
            }, {
                "s": "ab",
                "t": "20190509 0956",
                "nowp": 80.1,
                "np": 3116750,
                "av": 80.596,
                "n": 38956,
                "nowpPct": 0.0015003750937733224,
                "avPct": 0.007701925481370338
            }, {
                "s": "ab",
                "t": "20190509 0957",
                "nowp": 80.23,
                "np": 5191780,
                "av": 80.586,
                "n": 64800,
                "nowpPct": 0.00312578144536134,
                "avPct": 0.00757689422355582
            }, {
                "s": "ab",
                "t": "20190509 0958",
                "nowp": 80.33,
                "np": 5491210,
                "av": 80.584,
                "n": 68232,
                "nowpPct": 0.0043760940235058055,
                "avPct": 0.007551887971992988
            }, {
                "s": "be",
                "t": "20190509 0959",
                "nowp": 80.02,
                "np": 4481990,
                "av": 80.577,
                "n": 55900,
                "nowpPct": 0.000500125031257715,
                "avPct": 0.007464366091522808
            }, {
                "s": "be",
                "t": "20190509 1000",
                "nowp": 79.82,
                "np": 5193820,
                "av": 80.565,
                "n": 64944,
                "nowpPct": -0.002000500125031393,
                "avPct": 0.007314328582145458
            }, {
                "s": "ab",
                "t": "20190509 1001",
                "nowp": 80.7,
                "np": 8723130,
                "av": 80.556,
                "n": 108656,
                "nowpPct": 0.009002250562640646,
                "avPct": 0.007201800450112445
            }, {
                "s": "ab",
                "t": "20190509 1002",
                "nowp": 80.77,
                "np": 5577730,
                "av": 80.561,
                "n": 69000,
                "nowpPct": 0.009877469367341735,
                "avPct": 0.007264316079019793
            }, {
                "s": "ab",
                "t": "20190509 1003",
                "nowp": 80.85,
                "np": 5978270,
                "av": 80.566,
                "n": 74000,
                "nowpPct": 0.010877719429857343,
                "avPct": 0.0073268317079269625
            }, {
                "s": "be",
                "t": "20190509 1004",
                "nowp": 80.75,
                "np": 4773720,
                "av": 80.569,
                "n": 59100,
                "nowpPct": 0.009627406851712879,
                "avPct": 0.0073643410852713
            }, {
                "s": "be",
                "t": "20190509 1005",
                "nowp": 80.56,
                "np": 4127100,
                "av": 80.572,
                "n": 51100,
                "nowpPct": 0.007251812953238288,
                "avPct": 0.007401850462615638
            }, {
                "s": "be",
                "t": "20190509 1006",
                "nowp": 80.5,
                "np": 2888490,
                "av": 80.571,
                "n": 35900,
                "nowpPct": 0.006501625406351538,
                "avPct": 0.007389347336834133
            }, {
                "s": "ab",
                "t": "20190509 1007",
                "nowp": 80.69,
                "np": 2274270,
                "av": 80.572,
                "n": 28200,
                "nowpPct": 0.008877219304826128,
                "avPct": 0.007401850462615638
            }, {
                "s": "ab",
                "t": "20190509 1008",
                "nowp": 80.76,
                "np": 4746960,
                "av": 80.574,
                "n": 58800,
                "nowpPct": 0.009752438109527396,
                "avPct": 0.007426856714178471
            }, {
                "s": "ab",
                "t": "20190509 1009",
                "nowp": 80.89,
                "np": 4501460,
                "av": 80.578,
                "n": 55700,
                "nowpPct": 0.011377844461115236,
                "avPct": 0.007476869217304313
            }, {
                "s": "ab",
                "t": "20190509 1010",
                "nowp": 80.98,
                "np": 5042270,
                "av": 80.583,
                "n": 62300,
                "nowpPct": 0.01250312578144536,
                "avPct": 0.0075393848462114825
            }, {
                "s": "be",
                "t": "20190509 1011",
                "nowp": 80.76,
                "np": 4997020,
                "av": 80.588,
                "n": 61800,
                "nowpPct": 0.009752438109527396,
                "avPct": 0.007601900475118653
            }, {
                "s": "ab",
                "t": "20190509 1012",
                "nowp": 80.79,
                "np": 3190130,
                "av": 80.589,
                "n": 39500,
                "nowpPct": 0.01012753188297077,
                "avPct": 0.007614403600900158
            }, {
                "s": "ab",
                "t": "20190509 1013",
                "nowp": 80.8,
                "np": 2262890,
                "av": 80.591,
                "n": 28000,
                "nowpPct": 0.01025256314078511,
                "avPct": 0.007639409852462991
            }, {
                "s": "eq",
                "t": "20190509 1014",
                "nowp": 80.8,
                "np": 2742150,
                "av": 80.594,
                "n": 33900,
                "nowpPct": 0.01025256314078511,
                "avPct": 0.007676919229807328
            }, {
                "s": "be",
                "t": "20190509 1015",
                "nowp": 80.7,
                "np": 2058910,
                "av": 80.595,
                "n": 25500,
                "nowpPct": 0.009002250562640646,
                "avPct": 0.007689422355588833
            }, {
                "s": "be",
                "t": "20190509 1016",
                "nowp": 80.6,
                "np": 2177560,
                "av": 80.595,
                "n": 27000,
                "nowpPct": 0.0077519379844960025,
                "avPct": 0.007689422355588833
            }, {
                "s": "be",
                "t": "20190509 1017",
                "nowp": 80.5,
                "np": 1384920,
                "av": 80.595,
                "n": 17200,
                "nowpPct": 0.006501625406351538,
                "avPct": 0.007689422355588833
            }, {
                "s": "be",
                "t": "20190509 1018",
                "nowp": 80.41,
                "np": 1561990,
                "av": 80.594,
                "n": 19400,
                "nowpPct": 0.005376344086021413,
                "avPct": 0.007676919229807328
            }, {
                "s": "be",
                "t": "20190509 1019",
                "nowp": 80.23,
                "np": 1992910,
                "av": 80.593,
                "n": 24800,
                "nowpPct": 0.00312578144536134,
                "avPct": 0.007664416104026001
            }, {
                "s": "ab",
                "t": "20190509 1020",
                "nowp": 80.27,
                "np": 4805110,
                "av": 80.587,
                "n": 59900,
                "nowpPct": 0.003625906476619055,
                "avPct": 0.007589397349337325
            }, {
                "s": "ab",
                "t": "20190509 1021",
                "nowp": 80.37,
                "np": 906730,
                "av": 80.587,
                "n": 11300,
                "nowpPct": 0.004876219054763698,
                "avPct": 0.007589397349337325
            }, {
                "s": "ab",
                "t": "20190509 1022",
                "nowp": 80.4,
                "np": 2459370,
                "av": 80.585,
                "n": 30600,
                "nowpPct": 0.0052513128282070725,
                "avPct": 0.007564391097774316
            }, {
                "s": "be",
                "t": "20190509 1023",
                "nowp": 80.31,
                "np": 1422080,
                "av": 80.584,
                "n": 17701,
                "nowpPct": 0.004126031507876948,
                "avPct": 0.007551887971992988
            }, {
                "s": "be",
                "t": "20190509 1024",
                "nowp": 80.2,
                "np": 2262990,
                "av": 80.582,
                "n": 28199,
                "nowpPct": 0.002750687671917965,
                "avPct": 0.007526881720429978
            }, {
                "s": "be",
                "t": "20190509 1025",
                "nowp": 80.11,
                "np": 1074130,
                "av": 80.58,
                "n": 13400,
                "nowpPct": 0.00162540635158784,
                "avPct": 0.0075018754688671455
            }, {
                "s": "ab",
                "t": "20190509 1026",
                "nowp": 80.13,
                "np": 2130840,
                "av": 80.578,
                "n": 26601,
                "nowpPct": 0.0018754688672166975,
                "avPct": 0.007476869217304313
            }, {
                "s": "ab",
                "t": "20190509 1027",
                "nowp": 80.38,
                "np": 1221340,
                "av": 80.577,
                "n": 15200,
                "nowpPct": 0.005001250312578038,
                "avPct": 0.007464366091522808
            }, {
                "s": "be",
                "t": "20190509 1028",
                "nowp": 80.14,
                "np": 1990080,
                "av": 80.575,
                "n": 24800,
                "nowpPct": 0.002000500125031215,
                "avPct": 0.007439359839959975
            }, {
                "s": "be",
                "t": "20190509 1029",
                "nowp": 79.9,
                "np": 10489170,
                "av": 80.558,
                "n": 131100,
                "nowpPct": -0.0010002500625156075,
                "avPct": 0.007226806701675455
            }, {
                "s": "be",
                "t": "20190509 1030",
                "nowp": 79.81,
                "np": 4868960,
                "av": 80.549,
                "n": 61000,
                "nowpPct": -0.0021255313828457325,
                "avPct": 0.0071142785696424425
            }, {
                "s": "ab",
                "t": "20190509 1031",
                "nowp": 79.91,
                "np": 3198040,
                "av": 80.543,
                "n": 40000,
                "nowpPct": -0.0008752188047012676,
                "avPct": 0.007039259814953768
            }, {
                "s": "ab",
                "t": "20190509 1032",
                "nowp": 79.99,
                "np": 1869140,
                "av": 80.54,
                "n": 23400,
                "nowpPct": 0.0001250312578143399,
                "avPct": 0.007001750437609431
            }, {
                "s": "be",
                "t": "20190509 1033",
                "nowp": 79.86,
                "np": 2739710,
                "av": 80.535,
                "n": 34300,
                "nowpPct": -0.0015003750937735002,
                "avPct": 0.006939234808702083
            }, {
                "s": "be",
                "t": "20190509 1034",
                "nowp": 79.82,
                "np": 2403920,
                "av": 80.531,
                "n": 30100,
                "nowpPct": -0.002000500125031393,
                "avPct": 0.006889222305576418
            }, {
                "s": "ab",
                "t": "20190509 1035",
                "nowp": 80.02,
                "np": 10634120,
                "av": 80.512,
                "n": 133200,
                "nowpPct": 0.000500125031257715,
                "avPct": 0.006651662915728888
            }, {
                "s": "be",
                "t": "20190509 1036",
                "nowp": 79.9,
                "np": 2783460,
                "av": 80.508,
                "n": 34800,
                "nowpPct": -0.0010002500625156075,
                "avPct": 0.006601650412603045
            }, {
                "s": "eq",
                "t": "20190509 1037",
                "nowp": 79.9,
                "np": 3496960,
                "av": 80.502,
                "n": 43800,
                "nowpPct": -0.0010002500625156075,
                "avPct": 0.00652663165791437
            }, {
                "s": "be",
                "t": "20190509 1038",
                "nowp": 79.8,
                "np": 7888790,
                "av": 80.489,
                "n": 98800,
                "nowpPct": -0.0022505626406602503,
                "avPct": 0.006364091022755693
            }, {
                "s": "be",
                "t": "20190509 1039",
                "nowp": 79.38,
                "np": 7098410,
                "av": 80.473,
                "n": 89200,
                "nowpPct": -0.007501875468867323,
                "avPct": 0.0061640410102525005
            }, {
                "s": "ab",
                "t": "20190509 1040",
                "nowp": 79.39,
                "np": 5116750,
                "av": 80.459,
                "n": 64500,
                "nowpPct": -0.007376844211052806,
                "avPct": 0.0059889972493123176
            }, {
                "s": "ab",
                "t": "20190509 1041",
                "nowp": 79.61,
                "np": 4656520,
                "av": 80.449,
                "n": 58500,
                "nowpPct": -0.00462615653913484,
                "avPct": 0.0058639659914978
            }, {
                "s": "be",
                "t": "20190509 1042",
                "nowp": 79.47,
                "np": 2385240,
                "av": 80.444,
                "n": 30000,
                "nowpPct": -0.006376594148537198,
                "avPct": 0.00580145036259063
            }, {
                "s": "ab",
                "t": "20190509 1043",
                "nowp": 79.52,
                "np": 3884260,
                "av": 80.434,
                "n": 48900,
                "nowpPct": -0.005751437859464965,
                "avPct": 0.0056764191047761125
            }, {
                "s": "be",
                "t": "20190509 1044",
                "nowp": 79.28,
                "np": 3947780,
                "av": 80.425,
                "n": 49700,
                "nowpPct": -0.008752188047011788,
                "avPct": 0.005563890972743101
            }, {
                "s": "be",
                "t": "20190509 1045",
                "nowp": 79.12,
                "np": 3018510,
                "av": 80.417,
                "n": 38100,
                "nowpPct": -0.010752688172043003,
                "avPct": 0.0054638659664915925
            }, {
                "s": "ab",
                "t": "20190509 1046",
                "nowp": 79.5,
                "np": 5914430,
                "av": 80.4,
                "n": 74677,
                "nowpPct": -0.006001500375093823,
                "avPct": 0.0052513128282070725
            }, {
                "s": "be",
                "t": "20190509 1047",
                "nowp": 79.31,
                "np": 2353550,
                "av": 80.395,
                "n": 29600,
                "nowpPct": -0.008377094273568413,
                "avPct": 0.005188797199299725
            }, {
                "s": "ab",
                "t": "20190509 1048",
                "nowp": 79.39,
                "np": 3739120,
                "av": 80.386,
                "n": 47150,
                "nowpPct": -0.007376844211052806,
                "avPct": 0.005076269067266713
            }, {
                "s": "be",
                "t": "20190509 1049",
                "nowp": 79.25,
                "np": 4755510,
                "av": 80.375,
                "n": 59950,
                "nowpPct": -0.009127281820455163,
                "avPct": 0.0049387346836708675
            }, {
                "s": "ab",
                "t": "20190509 1050",
                "nowp": 80.67,
                "np": 7437840,
                "av": 80.366,
                "n": 93150,
                "nowpPct": 0.00862715678919727,
                "avPct": 0.004826206551637856
            }, {
                "s": "ab",
                "t": "20190509 1051",
                "nowp": 81.2,
                "np": 16792300,
                "av": 80.388,
                "n": 207300,
                "nowpPct": 0.015253813453363326,
                "avPct": 0.005101275318829723
            }, {
                "s": "be",
                "t": "20190509 1052",
                "nowp": 80.9,
                "np": 4655040,
                "av": 80.394,
                "n": 57500,
                "nowpPct": 0.011502875718929753,
                "avPct": 0.005176294073518398
            }, {
                "s": "be",
                "t": "20190509 1053",
                "nowp": 80.89,
                "np": 8046480,
                "av": 80.402,
                "n": 99500,
                "nowpPct": 0.011377844461115236,
                "avPct": 0.005276319079769905
            }, {
                "s": "be",
                "t": "20190509 1054",
                "nowp": 80.68,
                "np": 2884330,
                "av": 80.404,
                "n": 35700,
                "nowpPct": 0.008752188047011788,
                "avPct": 0.005301325331332738
            }, {
                "s": "be",
                "t": "20190509 1055",
                "nowp": 80.5,
                "np": 2916200,
                "av": 80.405,
                "n": 36200,
                "nowpPct": 0.006501625406351538,
                "avPct": 0.005313828457114243
            }, {
                "s": "ab",
                "t": "20190509 1056",
                "nowp": 80.99,
                "np": 18252530,
                "av": 80.428,
                "n": 225200,
                "nowpPct": 0.0126281570392597,
                "avPct": 0.005601400350087438
            }, {
                "s": "be",
                "t": "20190509 1057",
                "nowp": 80.89,
                "np": 5758670,
                "av": 80.434,
                "n": 71100,
                "nowpPct": 0.011377844461115236,
                "avPct": 0.0056764191047761125
            }, {
                "s": "be",
                "t": "20190509 1058",
                "nowp": 80.68,
                "np": 10147950,
                "av": 80.445,
                "n": 125300,
                "nowpPct": 0.008752188047011788,
                "avPct": 0.005813953488371958
            }, {
                "s": "ab",
                "t": "20190509 1059",
                "nowp": 80.92,
                "np": 1261070,
                "av": 80.446,
                "n": 15600,
                "nowpPct": 0.011752938234558611,
                "avPct": 0.005826456614153463
            }, {
                "s": "be",
                "t": "20190509 1100",
                "nowp": 80.68,
                "np": 2269320,
                "av": 80.447,
                "n": 28100,
                "nowpPct": 0.008752188047011788,
                "avPct": 0.005838959739934968
            }, {
                "s": "be",
                "t": "20190509 1101",
                "nowp": 80.58,
                "np": 2556840,
                "av": 80.448,
                "n": 31700,
                "nowpPct": 0.0075018754688671455,
                "avPct": 0.0058514628657162955
            }, {
                "s": "be",
                "t": "20190509 1102",
                "nowp": 80.5,
                "np": 3302350,
                "av": 80.449,
                "n": 41000,
                "nowpPct": 0.006501625406351538,
                "avPct": 0.0058639659914978
            }, {
                "s": "be",
                "t": "20190509 1103",
                "nowp": 80.48,
                "np": 3211430,
                "av": 80.449,
                "n": 39900,
                "nowpPct": 0.00625156289072268,
                "avPct": 0.0058639659914978
            }, {
                "s": "be",
                "t": "20190509 1104",
                "nowp": 80.3,
                "np": 2606380,
                "av": 80.449,
                "n": 32400,
                "nowpPct": 0.00400100025006243,
                "avPct": 0.0058639659914978
            }, {
                "s": "be",
                "t": "20190509 1105",
                "nowp": 80.2,
                "np": 3204550,
                "av": 80.447,
                "n": 40000,
                "nowpPct": 0.002750687671917965,
                "avPct": 0.005838959739934968
            }, {
                "s": "ab",
                "t": "20190509 1106",
                "nowp": 80.29,
                "np": 1511540,
                "av": 80.446,
                "n": 18853,
                "nowpPct": 0.00387596899224809,
                "avPct": 0.005826456614153463
            }, {
                "s": "eq",
                "t": "20190509 1107",
                "nowp": 80.29,
                "np": 2362170,
                "av": 80.446,
                "n": 29400,
                "nowpPct": 0.00387596899224809,
                "avPct": 0.005826456614153463
            }, {
                "s": "ab",
                "t": "20190509 1108",
                "nowp": 80.35,
                "np": 1719010,
                "av": 80.445,
                "n": 21400,
                "nowpPct": 0.0046261565391346625,
                "avPct": 0.005813953488371958
            }, {
                "s": "eq",
                "t": "20190509 1109",
                "nowp": 80.35,
                "np": 811450,
                "av": 80.445,
                "n": 10100,
                "nowpPct": 0.0046261565391346625,
                "avPct": 0.005813953488371958
            }, {
                "s": "be",
                "t": "20190509 1110",
                "nowp": 80.25,
                "np": 754740,
                "av": 80.445,
                "n": 9400,
                "nowpPct": 0.0033758439609901975,
                "avPct": 0.005813953488371958
            }, {
                "s": "be",
                "t": "20190509 1111",
                "nowp": 80.16,
                "np": 2742510,
                "av": 80.444,
                "n": 34200,
                "nowpPct": 0.0022505626406600725,
                "avPct": 0.00580145036259063
            }, {
                "s": "ab",
                "t": "20190509 1112",
                "nowp": 80.5,
                "np": 2419740,
                "av": 80.443,
                "n": 30100,
                "nowpPct": 0.006501625406351538,
                "avPct": 0.005788947236809125
            }, {
                "s": "be",
                "t": "20190509 1113",
                "nowp": 80.45,
                "np": 5345660,
                "av": 80.443,
                "n": 66500,
                "nowpPct": 0.005876469117279306,
                "avPct": 0.005788947236809125
            }, {
                "s": "be",
                "t": "20190509 1114",
                "nowp": 80.42,
                "np": 3945540,
                "av": 80.442,
                "n": 49100,
                "nowpPct": 0.00550137534383593,
                "avPct": 0.00577644411102762
            }, {
                "s": "be",
                "t": "20190509 1115",
                "nowp": 80.38,
                "np": 1061100,
                "av": 80.442,
                "n": 13200,
                "nowpPct": 0.005001250312578038,
                "avPct": 0.00577644411102762
            }, {
                "s": "ab",
                "t": "20190509 1116",
                "nowp": 80.48,
                "np": 2244730,
                "av": 80.442,
                "n": 27900,
                "nowpPct": 0.00625156289072268,
                "avPct": 0.00577644411102762
            }, {
                "s": "be",
                "t": "20190509 1117",
                "nowp": 80.47,
                "np": 1054320,
                "av": 80.442,
                "n": 13100,
                "nowpPct": 0.006126531632908163,
                "avPct": 0.00577644411102762
            }, {
                "s": "be",
                "t": "20190509 1118",
                "nowp": 80.3,
                "np": 675670,
                "av": 80.442,
                "n": 8400,
                "nowpPct": 0.00400100025006243,
                "avPct": 0.00577644411102762
            }, {
                "s": "be",
                "t": "20190509 1119",
                "nowp": 80.21,
                "np": 706500,
                "av": 80.442,
                "n": 8800,
                "nowpPct": 0.0028757189297323052,
                "avPct": 0.00577644411102762
            }, {
                "s": "be",
                "t": "20190509 1120",
                "nowp": 79.88,
                "np": 2489970,
                "av": 80.44,
                "n": 31100,
                "nowpPct": -0.0012503125781446428,
                "avPct": 0.005751437859464787
            }, {
                "s": "ab",
                "t": "20190509 1121",
                "nowp": 79.95,
                "np": 1997980,
                "av": 80.439,
                "n": 25000,
                "nowpPct": -0.00037509377344337506,
                "avPct": 0.005738934733683283
            }, {
                "s": "ab",
                "t": "20190509 1122",
                "nowp": 80.03,
                "np": 866240,
                "av": 80.438,
                "n": 10800,
                "nowpPct": 0.0006251562890722325,
                "avPct": 0.005726431607901955
            }, {
                "s": "ab",
                "t": "20190509 1123",
                "nowp": 80.05,
                "np": 496750,
                "av": 80.438,
                "n": 6200,
                "nowpPct": 0.0008752188047010899,
                "avPct": 0.005726431607901955
            }, {
                "s": "ab",
                "t": "20190509 1124",
                "nowp": 80.1,
                "np": 1299240,
                "av": 80.437,
                "n": 16200,
                "nowpPct": 0.0015003750937733224,
                "avPct": 0.00571392848212045
            }, {
                "s": "be",
                "t": "20190509 1125",
                "nowp": 80.05,
                "np": 384310,
                "av": 80.437,
                "n": 4800,
                "nowpPct": 0.0008752188047010899,
                "avPct": 0.00571392848212045
            }, {
                "s": "ab",
                "t": "20190509 1126",
                "nowp": 80.09,
                "np": 400530,
                "av": 80.437,
                "n": 5000,
                "nowpPct": 0.0013753438359589826,
                "avPct": 0.00571392848212045
            }, {
                "s": "be",
                "t": "20190509 1127",
                "nowp": 80.01,
                "np": 1801210,
                "av": 80.436,
                "n": 22500,
                "nowpPct": 0.00037509377344337506,
                "avPct": 0.005701425356339123
            }, {
                "s": "be",
                "t": "20190509 1128",
                "nowp": 80,
                "np": 1440510,
                "av": 80.435,
                "n": 18000,
                "nowpPct": 0.0002500625156288575,
                "avPct": 0.005688922230557618
            }, {
                "s": "eq",
                "t": "20190509 1129",
                "nowp": 80,
                "np": 2495330,
                "av": 80.433,
                "n": 31200,
                "nowpPct": 0.0002500625156288575,
                "avPct": 0.005663915978994786
            }, {
                "s": "be",
                "t": "20190509 1130",
                "nowp": 79.99,
                "np": 3599680,
                "av": 80.43,
                "n": 45000,
                "nowpPct": 0.0001250312578143399,
                "avPct": 0.005626406601650448
            }]
            var xData = ["0930", "0931", "0932", "0933", "0934", "0935", "0936", "0937", "0938", "0939", "0940", "0941", "0942", "0943", "0944", "0945", "0946", "0947", "0948", "0949", "0950", "0951", "0952", "0953", "0954", "0955", "0956", "0957", "0958", "0959", "1000", "1001", "1002", "1003", "1004", "1005", "1006", "1007", "1008", "1009", "1010", "1011", "1012", "1013", "1014", "1015", "1016", "1017", "1018", "1019", "1020", "1021", "1022", "1023", "1024", "1025", "1026", "1027", "1028", "1029", "1030", "1031", "1032", "1033", "1034", "1035", "1036", "1037", "1038", "1039", "1040", "1041", "1042", "1043", "1044", "1045", "1046", "1047", "1048", "1049", "1050", "1051", "1052", "1053", "1054", "1055", "1056", "1057", "1058", "1059", "1100", "1101", "1102", "1103", "1104", "1105", "1106", "1107", "1108", "1109", "1110", "1111", "1112", "1113", "1114", "1115", "1116", "1117", "1118", "1119", "1120", "1121", "1122", "1123", "1124", "1125", "1126", "1127", "1128", "1129", "1130"]
            var xTick = ["0930", "1030", "1130"]
            var pre = 79.98

            chart.setOption({
                data: [{
                    originData: kData
                },
                {
                    $dataIndex: 0,
                    originData: xData
                }],
                grid: [{
                    top: '10%',
                    left: '10%',
                    right: '13%',
                    bottom: '10%'
                }],
                series: [{
                    type: 'line',
                    aliasType: 'hqline',
                    name: code,
                    $dataIndex: 0,
                    dataKey: 'nowpPct',
                    color: '#53A8E2',
                    line: {
                        style: {
                            lineWidth: 1
                        }
                    },
                    area: {
                        show: true,
                        snapToBottom: true,
                        style: {
                            fill: {
                                y2: 1,
                                x2: 0,
                                colorStops: [{
                                    offset: 0,
                                    color: '#1f8ceb'
                                },
                                {
                                    offset: 1,
                                    color: 'rgba(255,255,255,0.2)'
                                }]
                            },
                            opacity: 0.5
                        }
                    }
                },
                {
                    type: 'line',
                    aliasType: 'hqline',
                    name: code,
                    $dataIndex: 0,
                    space: [20, 50],
                    dataKey: 'avPct',
                    color: '#efaa50',
                    line: {
                        style: {
                            lineWidth: 1
                        }
                    }
                },
                ],
                axis: [{
                    position: 'bottom',
                    type: 'band',
                    $dataIndex: 1,
                    $gridIndex: [0],
                    paddingOuter: 0,
                    tick: {
                        show: false
                    },
                    label: {
                        padding: 4,
                        inRange: true,
                        formatter: function (d) {
                            return d.substr(0, 2) + ':' + d.substr(2, 2);
                        },
                        style: {
                            fill: color.eqAxis
                        }
                    },
                    line: {
                        show: false,
                        onZero: true
                    },
                    tickValues: xTick,
                    ifTriggerMove: function (event) {
                        if (event.axisData.match('___') || event.data.series.length ===
                            0) {
                            return false;
                        } else {
                            return true;
                        }
                    }
                },
                {
                    position: 'right',
                    type: 'linear',
                    xOrY: 'y',
                    symmetry: true,
                    domainScale: 1,
                    domainEqualZero: [-0.1,
                        0.1],
                    tickValues: function (domain) {
                        return [domain[0],
                        domain[0] / 2,
                            0,
                        domain[1] / 2,
                        domain[1]];
                    },
                    label: {
                        padding: 4,
                        style: function (v) {
                            var fill;

                            if (v > 0) {
                                fill = color.abAxis;
                            } else if (v === 0) {
                                fill = color.eqAxis;
                            } else {
                                fill = color.beAxis;
                            }

                            return {
                                fill: fill
                            }
                        },
                        formatter: function (v) {
                            return (v * 100).toFixed(2) + '%'
                        }
                    },
                    line: {
                        show: false
                    },
                    tick: {
                        show: false
                    }
                },
                {
                    position: 'left',
                    relyOtherAxis: true,
                    $axisIndex: 1,
                    type: 'linear',
                    xOrY: 'y',
                    label: {
                        padding: 4,
                        style: function (v) {
                            var fill;

                            if (v > 0) {
                                fill = color.abAxis;
                            } else if (v === 0) {
                                fill = color.eqAxis;
                            } else {
                                fill = color.beAxis;
                            }

                            return {
                                fill: fill
                            }
                        },
                        formatter: function (v) {
                            return ((v + 1) * pre).toFixed(2)
                        }
                    },
                    line: {
                        show: false
                    },
                    tick: {
                        show: false
                    }
                }],
                axisPointer: [{
                    $axisIndex: 0,
                    line: {
                        style: {
                            stroke: color.hoverLine,
                            lineDash: [2,
                                3],
                            lineWidth: 1
                        }
                    },
                    label: {
                        gap: 0,
                        style: {
                            fill: 'white',
                            textBorderRadius: 0,
                            textBackgroundColor: '#555'
                        },
                    }
                },
                {
                    $axisIndex: [1,
                        2],
                    $axisPointerIndex: 0,
                    $seriesIndex: 0,
                    label: {
                        gap: 0,
                        style: function (v) {
                            var fill;

                            if (v > 0) {
                                fill = color.abAxis;
                            } else if (v === 0) {
                                fill = color.eqAxis;
                            } else {
                                fill = color.beAxis;
                            }

                            return {
                                textPadding: 4,
                                fill: 'white',
                                textBackgroundColor: fill
                            }
                        }
                    },
                    // 指示线
                    line: {
                        style: {
                            stroke: color.hoverLine,
                            lineDash: [2,
                                3],
                            lineWidth: 1
                        }
                    }
                }],
                markPoint: [{
                    $seriesIndex: 0,
                    $axisIndex: [0,
                        1],
                    enableSelect: false,
                    symbol: {
                        offset: [0,
                            -30],
                        size: 50,
                        style: {
                            normal: {
                                fill: '#66c'
                            },
                            emphasis: {
                                fill: '#fc0'
                            }
                        }
                    },
                    label: {
                        normal: {
                            show: true,
                            style: {
                                fill: 'white',
                                position: 'inside'
                            },
                            formatter: (d) => {
                                return '买'
                            }
                        },
                        emphasis: {
                            show: true,
                            style: {
                                fill: '#26f'
                            },
                        },

                    },
                    data: [{
                        symbol: {
                            type: 'pin',
                            offset: [0,
                                -10],
                            size: [40,
                                45]
                        },
                        xValue: '1000',
                    },
                    {
                        symbol: {
                            type: 'pin',
                            offset: [0,
                                -10],
                            size: [40,
                                45]
                        },
                        type: 'min',
                    },
                    {
                        symbol: {
                            type: 'pin',
                            offset: [0,
                                -10],
                            size: [40,
                                45]
                        },
                        xValue: '1430',
                    }],
                }],
                animation: false
            });
        },
    }
</script>

<style scoped>
    .buyAsale {
        display: flex;
        justify-content: space-around;
        margin-top: 0.8rem;
    }

    .picNo {
        height: 6rem;
        width: 6rem;
        background: url(//i.thsi.cn/iwencai/xuangu/images/icon_sprite.png) -20px -388px no-repeat;
        background-size: 290px 538px;
        margin: 0 auto;
        margin-top: 2rem;
    }

    .fontNo {
        text-align: center;
        color: #b2b2b2;
        margin-top: 0.5rem;
    }

    .nono {
        margin-top: 0.5rem;
        border: 1px solid #ededed;
        border-radius: 8px;
        height: 13rem;
        padding: 1rem;
    }

    .bigCash_con ul {
        display: flex;
        justify-content: space-between;

    }

    .bigCash_con ul>li {
        display: inline-block;
    }

    .bigCash {
        margin-top: 0.5rem;
    }

    .nowDays {
        margin-top: 1rem;
    }

    .nowDays>ul>li {
        display: flex;
        justify-content: space-between;
        height: 1.2rem;
        line-height: 1.2rem;

    }

    .nowDays>ul>li span:nth-child(3) {
        color: red;
    }

    .nowDays>ul>li:nth-child(2) span:nth-child(3) {
        color: green;
    }

    .nowDays_title02 {
        height: 2rem;
        line-height: 2rem;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .nowDays_title {
        height: 2rem;
        line-height: 2rem;
        font-size: 0.8rem;
        font-weight: 600;
        border-bottom: 1px solid #ededed;
    }

    .nowDays_title::before,
    .nowDays_title02::before {
        content: "";
        width: 0.2rem;
        height: 1rem;
        background-color: red;
        margin: 0.45rem 0.6rem 0.45rem 0;
        display: inline-block;
        float: left;
    }

    .stockTitle {
        height: 3rem;
        font-size: 1rem;
        line-height: 3rem;
        font-weight: 600;
    }

    .container {
        margin: 2.25rem 0.8rem 2.24rem;
    }

    .van-nav-bar /deep/ .van-icon {
        color: #ffffff;
        font-size: 1.4rem !important;
    }

    /deep/.van-nav-bar__left {
        padding: 0 0.3rem;
    }

    .van-nav-bar {
        z-index: 1;
        line-height: 2.25rem;
        text-align: center;
        background-color: rgb(233, 49, 49);
        -webkit-user-select: none;
        user-select: none;
    }

    /deep/.van-nav-bar__content {
        height: 2.25rem;
    }

    /deep/ .van-nav-bar__title {
        color: #fff;
        font-size: 0.8rem;
    }
</style>